<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Professional Roulette Overlap Tracker</title>
    <style>
        :root { --green: #1b5e20; --red: #d32f2f; --black: #1a1a1a; --gold: #ffc107; --ui-bg: #2c3e50; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #121212; color: white; margin: 0; padding: 20px; }
        
        .container { max-width: 1100px; margin: auto; }
        
        /* Stats Dashboard */
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .stat-card { background: var(--ui-bg); padding: 15px; border-radius: 8px; border-bottom: 3px solid var(--gold); text-align: center; }
        .stat-card small { color: #bdc3c7; text-transform: uppercase; font-size: 0.75rem; }
        .stat-card div { font-size: 1.5rem; font-weight: bold; color: var(--gold); }

        /* Mode Selector */
        .controls { background: var(--ui-bg); padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
        select, button { padding: 10px; border-radius: 4px; border: none; font-weight: bold; }
        select { background: white; cursor: pointer; }
        button { background: var(--gold); cursor: pointer; transition: 0.2s; }
        button:hover { background: #e6ac00; }

        /* The Table - Clean Grid */
        .table-area { background: var(--green); padding: 20px; border-radius: 12px; border: 4px solid #3e2723; margin-bottom: 20px; overflow-x: auto; }
        .roulette-grid { display: grid; grid-template-columns: 60px repeat(12, 1fr); gap: 3px; min-width: 800px; }
        .cell { height: 50px; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; border: 1px solid rgba(255,255,255,0.2); transition: 0.2s; }
        .cell:hover { opacity: 0.8; transform: scale(0.98); }
        .zero { grid-row: span 3; background: var(--green); border: 2px solid white; height: auto; }
        .r { background: var(--red); }
        .b { background: var(--black); }

        /* Simulation & Log Area */
        .work-area { display: grid; grid-template-columns: 1fr 350px; gap: 20px; }
        .panel { background: var(--ui-bg); padding: 20px; border-radius: 8px; height: 350px; display: flex; flex-direction: column; }
        textarea { flex-grow: 1; background: #34495e; color: white; border: 1px solid #555; padding: 10px; border-radius: 4px; resize: none; }
        .log { flex-grow: 1; overflow-y: auto; background: #1a1a1a; padding: 10px; font-family: monospace; font-size: 0.85rem; border-radius: 4px; }
        
        .hidden { display: none; }
        .advice-box { background: #1565c0; padding: 10px; border-radius: 4px; margin-bottom: 10px; border-left: 5px solid var(--gold); }
    </style>
</head>
<body>

<div class="container">
    <div class="dashboard">
        <div class="stat-card"><small>Bankroll</small><div id="bank">1000</div></div>
        <div class="stat-card"><small>Peak</small><div id="peak">1000</div></div>
        <div class="stat-card"><small>Low Units</small><div id="uLow">1</div></div>
        <div class="stat-card"><small>High Units</small><div id="uHigh">1</div></div>
    </div>

    <div class="controls">
        <label>Input Mode:</label>
        <select id="modeSelect" onchange="switchMode()">
            <option value="manual">Manual (Click Table)</option>
            <option value="simulation">Bulk Simulation (Paste Data)</option>
        </select>
        <button onclick="resetStats()" style="background:#7f8c8d; color:white; margin-left:auto;">Reset Session</button>
    </div>

    <div id="manualPanel" class="table-area">
        <div class="roulette-grid" id="grid">
            <div class="cell zero" onclick="processNumber(0)">0</div>
            </div>
    </div>

    <div id="simPanel" class="panel hidden">
        <p>Paste numbers (separated by comma, space, or enter):</p>
        <textarea id="bulkData" placeholder="10, 25, 3, 36, 11..."></textarea>
        <button onclick="runBulkSim()">Execute Simulation</button>
    </div>

    <div class="work-area">
        <div class="panel">
            <h3>Strategy Advice</h3>
            <div id="betAdvice" class="advice-box">
                Waiting for 36 numbers to establish frequency...
            </div>
            <div id="log" class="log"></div>
        </div>
        <div class="panel">
            <h3>Street Frequency (1-36)</h3>
            <div id="freqChart" class="log"></div>
        </div>
    </div>
</div>



<script>
    let bankroll = 1000, peak = 1000, history = [], unitLow = 1, unitHigh = 1;
    const reds = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

    // Build the grid properly
    const grid = document.getElementById('grid');
    for (let i = 1; i <= 36; i++) {
        let col = Math.ceil(i / 3);
        let row = i % 3 === 0 ? 1 : (i % 3 === 1 ? 3 : 2);
        let div = document.createElement('div');
        div.className = `cell ${reds.includes(i) ? 'r' : 'b'}`;
        div.innerText = i;
        div.style.gridColumn = col + 1;
        div.style.gridRow = row;
        div.onclick = () => processNumber(i);
        grid.appendChild(div);
    }

    function switchMode() {
        const mode = document.getElementById('modeSelect').value;
        document.getElementById('manualPanel').classList.toggle('hidden', mode !== 'manual');
        document.getElementById('simPanel').classList.toggle('hidden', mode !== 'simulation');
    }

    function processNumber(num) {
        // Logic requires 36 numbers of history to find high frequency
        if (history.length >= 36) {
            applyBetLogic(num);
        }
        history.push(num);
        updateUI(num);
    }

    function applyBetLogic(currentNum) {
        const last36 = history.slice(-36);
        const freq = {};
        last36.forEach(n => { if(n>0){ let s = Math.ceil(n/3); freq[s] = (freq[s]||0)+1; }});

        // Identify Hot Streets
        let hotLow = 1, maxL = -1, hotHigh = 7, maxH = -1;
        for(let s=1; s<=6; s++) if((freq[s]||0) >= maxL) { maxL = freq[s]; hotLow = s; }
        for(let s=7; s<=12; s++) if((freq[s]||0) >= maxH) { maxH = freq[s]; hotHigh = s; }

        // Place Bet (2 double streets overlapping hot street)
        const cost = (unitLow * 2) + (unitHigh * 2);
        if (bankroll < cost) {
            logMessage("INSUFFICIENT BANKROLL - SIMULATION STOPPED");
            return false;
        }
        bankroll -= cost;

        const s = Math.ceil(currentNum/3);
        
        // Low Side Result
        if (s === hotLow) { bankroll += (unitLow * 12); unitLow = Math.max(1, unitLow - 4); }
        else if (s === hotLow - 1 || s === hotLow + 1) { bankroll += (unitLow * 6); unitLow = Math.max(1, unitLow - 2); }
        else { unitLow += 1; }

        // High Side Result
        if (s === hotHigh) { bankroll += (unitHigh * 12); unitHigh = Math.max(1, unitHigh - 4); }
        else if (s === hotHigh - 1 || s === hotHigh + 1) { bankroll += (unitHigh * 6); unitHigh = Math.max(1, unitHigh - 2); }
        else { unitHigh += 1; }

        if (bankroll > peak) peak = bankroll;
        
        // Update Advice for NEXT round
        document.getElementById('betAdvice').innerHTML = `
            <b>Next Target:</b> Low St ${hotLow}, High St ${hotHigh}<br>
            <b>Bet:</b> 2 Units Low DS, 2 Units High DS
        `;
        return true;
    }

    function runBulkSim() {
        const raw = document.getElementById('bulkData').value;
        const nums = raw.split(/[\s,]+/).map(Number).filter(n => !isNaN(n) && n >= 0 && n <= 36);
        nums.forEach(n => processNumber(n));
    }

    function updateUI(lastNum) {
        document.getElementById('bank').innerText = Math.floor(bankroll);
        document.getElementById('peak').innerText = Math.floor(peak);
        document.getElementById('uLow').innerText = unitLow;
        document.getElementById('uHigh').innerText = unitHigh;
        logMessage(`Result: ${lastNum} | Balance: ${Math.floor(bankroll)}`);
    }

    function logMessage(msg) {
        const log = document.getElementById('log');
        log.innerHTML = `<div>${msg}</div>` + log.innerHTML;
    }

    function resetStats() {
        bankroll = 1000; peak = 1000; history = []; unitLow = 1; unitHigh = 1;
        document.getElementById('log').innerHTML = "";
        updateUI(0);
    }
</script>
</body>
</html>
